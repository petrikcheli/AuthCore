AuthCoreVP

–°–µ—Ä–≤–∏—Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

üìò –û–ø–∏—Å–∞–Ω–∏–µ

AuthCoreVP ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–∏—Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –∫ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º. –ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º C++17 –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

üõ† –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

client/ ‚Äî –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞.

server/ ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞.

.gitignore ‚Äî —Ñ–∞–π–ª –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π.

CMakeLists.txt ‚Äî —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞.

README.md ‚Äî —Ñ–∞–π–ª —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π.

üõ† –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/petrikcheli/AuthCoreVP.git
cd AuthCoreVP

2. –°–±–æ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é server/ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–±–æ—Ä–∫—É:

cd server
mkdir build
cd build
cmake ..
make

3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:

./server


–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å –Ω–∞ –ø–æ—Ä—Ç—É, —É–∫–∞–∑–∞–Ω–Ω–æ–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

4. –°–±–æ—Ä–∫–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é client/ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–±–æ—Ä–∫—É:

cd client
mkdir build
cd build
cmake ..
make

5. –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç:

./client


–ö–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ –∞–¥—Ä–µ—Å—É –∏ –ø–æ—Ä—Ç—É, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

üîê API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: Admin Panel

–≠—Ç–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ –∏ –¥–æ—Å—Ç—É–ø–∞–º–∏. –í—Å–µ API –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON –∏ —Ç—Ä–µ–±—É—é—Ç JWT-—Ç–æ–∫–µ–Ω (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–Ω–æ–µ).

/api/admin/login

–ú–µ—Ç–æ–¥: POST

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

–û–ø–∏—Å–∞–Ω–∏–µ: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –ø–æ–ª—É—á–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞.

–í—Ö–æ–¥ (JSON):

{
  "username": "admin",
  "password": "admin123"
}


–û—Ç–≤–µ—Ç (—É—Å–ø–µ—à–Ω–æ):

{
  "token": "<JWT-token>",
  "username": "admin"
}


–û—à–∏–±–∫–∏:

400 Invalid JSON

401 Unauthorized ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—Ö–æ–¥–∞

/api/admin/users

–ú–µ—Ç–æ–¥: GET

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer <token>

–û–ø–∏—Å–∞–Ω–∏–µ: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ.

–û—Ç–≤–µ—Ç (JSON):

[
  {
    "id": 1,
    "username": "admin",
    "role": "admin"
  },
  {
    "id": 2,
    "username": "operator1",
    "role": "operator"
  }
]


–û—à–∏–±–∫–∏:

401 Unauthorized ‚Äî —Ç–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω

/api/admin/add-user

–ú–µ—Ç–æ–¥: POST

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer <token>

–û–ø–∏—Å–∞–Ω–∏–µ: –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–í—Ö–æ–¥ (JSON):

{
  "username": "operator1",
  "full_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "password": "12345",
  "role": "operator"
}


–û—Ç–≤–µ—Ç: 200 User added

–û—à–∏–±–∫–∏:

400 Missing fields

400 Failed to add user

401 Unauthorized

/api/admin/delete-user

–ú–µ—Ç–æ–¥: POST

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer <token>

–û–ø–∏—Å–∞–Ω–∏–µ: –£–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID.

–í—Ö–æ–¥ (JSON):

{
  "id": 2
}


–û—Ç–≤–µ—Ç: 200 User deleted

–û—à–∏–±–∫–∏:

400 Invalid user ID

401 Unauthorized

/api/admin/controllers

–ú–µ—Ç–æ–¥: GET

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer <token>

–û–ø–∏—Å–∞–Ω–∏–µ: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.

–û—Ç–≤–µ—Ç (JSON):

[
  {
    "id": 1,
    "name": "Main Entrance",
    "serial": "ABC12345"
  },
  {
    "id": 2,
    "name": "Server Room",
    "serial": "DEF67890"
  }
]

/api/admin/add-controller

–ú–µ—Ç–æ–¥: POST

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer <token>

–û–ø–∏—Å–∞–Ω–∏–µ: –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤ –±–∞–∑—É.

–í—Ö–æ–¥ (JSON):

{
  "name": "Warehouse Door",
  "serial": "WH123456"
}


–û—Ç–≤–µ—Ç: 200 Controller added

–û—à–∏–±–∫–∏:

400 Missing fields

401 Unauthorized

/api/admin/delete-controller

–ú–µ—Ç–æ–¥: POST

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer <token>

–û–ø–∏—Å–∞–Ω–∏–µ: –£–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ ID.

–í—Ö–æ–¥ (JSON):

{
  "id": 3
}


–û—Ç–≤–µ—Ç: 200 Controller deleted

–û—à–∏–±–∫–∏:

400 Invalid controller ID

401 Unauthorized

/api/admin/grant-access

–ú–µ—Ç–æ–¥: POST

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer <token>

–û–ø–∏—Å–∞–Ω–∏–µ: –í—ã–¥–∞–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É.

–í—Ö–æ–¥ (JSON):

{
  "user_id": 2,
  "controller_id": 5
}


–û—Ç–≤–µ—Ç: 200 Access granted

–û—à–∏–±–∫–∏:

400 Invalid fields

401 Unauthorized

/api/admin/revoke-access

–ú–µ—Ç–æ–¥: POST

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer <token>

–û–ø–∏—Å–∞–Ω–∏–µ: –£–¥–∞–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É.

–í—Ö–æ–¥ (JSON):

{
  "user_id": 2,
  "controller_id": 5
}


–û—Ç–≤–µ—Ç: 200 Access revoked

–û—à–∏–±–∫–∏:

400 Invalid fields

401 Unauthorized

/api/admin/grant-access-all

–ú–µ—Ç–æ–¥: POST

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer <token>

–û–ø–∏—Å–∞–Ω–∏–µ: –í—ã–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º.

–í—Ö–æ–¥ (JSON):

{
  "user_id": 2
}


–û—Ç–≤–µ—Ç: 200 Access granted to all

–û—à–∏–±–∫–∏:

400 Invalid user ID

401 Unauthorized

/api/admin/revoke-access-all

–ú–µ—Ç–æ–¥: POST

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer <token>

–û–ø–∏—Å–∞–Ω–∏–µ: –£–¥–∞–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ –≤—Å–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º.

–í—Ö–æ–¥ (JSON):

{
  "user_id": 2
}


–û—Ç–≤–µ—Ç: 200 Access revoked from all

–û—à–∏–±–∫–∏:

400 Invalid user ID

401 Unauthorized

üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ü–∞—Ä–æ–ª–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º Argon2 –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.

–í—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç –ø–æ HTTPS (TLS).

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–∑—ã–≤ –¥–æ—Å—Ç—É–ø–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å.
